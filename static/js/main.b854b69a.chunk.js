(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(8),s=n.n(c),o=n(7),i=n.n(o),l=n(9),u=n(3),h=(n(17),n(18),n(10)),d=n(11),p=n(0),j=function(e){var t=e.searchQuery,n=e.handleUserSearchInput,r=e.onSearchSubmit;return Object(p.jsxs)("header",{className:"nav",children:[Object(p.jsx)("img",{className:"nav-logo",src:"https://img01.bt.co.uk/s/assets/191120/images/logo/logo-2018.svg",alt:"bt logo"}),Object(p.jsxs)("form",{className:"nav-search",children:[Object(p.jsx)("input",{className:"nav-search-input",type:"text",value:t,onChange:n,name:"search",placeholder:"Search the latest news..."}),Object(p.jsx)("button",{className:"nav-search-button",onClick:r,"aria-label":"search",children:Object(p.jsx)(h.a,{icon:d.a})})]})]})},b=(n(25),function(e){var t,n=e.title,r=e.author,a=e.description,c=e.url,s=e.imageUrl;return Object(p.jsx)("section",{className:"card-item-wrapper",children:Object(p.jsxs)("a",{href:c,className:"card-link",target:"_blank",rel:"noopener noreferrer",children:[Object(p.jsx)("img",{src:s||"https://picsum.photos/200/300",alt:n}),Object(p.jsxs)("article",{className:"card-item-content",children:[Object(p.jsx)("h3",{children:n}),r?Object(p.jsxs)("h4",{children:["By ",r]}):null,Object(p.jsx)("p",{children:(t=a,t.length>150?"".concat(t.substring(0,150),"..."):t)})]})]})})}),f=(n(26),function(){return Object(p.jsx)("footer",{children:Object(p.jsx)("h1",{children:"BT React Code Test - by Sandeep Bassi - April 2021"})})});var g=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(u.a)(c,2),o=s[0],h=s[1],d=Object(r.useState)(""),g=Object(u.a)(d,2),v=g[0],m=g[1],O=Object(r.useState)(""),w=Object(u.a)(O,2),x=w[0],y=w[1],k=Object(r.useState)(""),S=Object(u.a)(k,2),N=S[0],W=S[1],A="https://newsapi.org/v2/everything?q=".concat(x,"&sortBy=popularity"),U={headers:{Authorization:"3e8fcdeadac74b35b8e9ef95298042b7"}},B=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),m(""),e.next=5,fetch(A,U);case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(n=e.sent).length||!Array.isArray(n.articles)){e.next=15;break}h(n.articles.splice(0,10)),a(!1),y(""),e.next=16;break;case 15:throw new Error("payload is empty or not an array");case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0.message),m("Sorry there has been an error fetching your results. Please try again."),a(!1);case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(j,{searchQuery:x,handleUserSearchInput:function(e){return y(e.target.value.toLowerCase())},onSearchSubmit:function(e){e.preventDefault(),W(""),""===x?W("Please enter your article search criteria"):B()}}),N&&Object(p.jsx)("p",{className:"input-error",children:N}),Object(p.jsx)("main",{className:"main-wrapper",children:n?Object(p.jsx)("h1",{children:"Fecthing articles..."}):Object(p.jsxs)(p.Fragment,{children:[v&&Object(p.jsx)("p",{className:"input-error",children:v}),o.length>0?o.map((function(e,t){return Object(p.jsx)(b,{title:e.title,author:e.author,description:e.description,url:e.url,imageUrl:null===e||void 0===e?void 0:e.urlToImage},t)})):null]})}),Object(p.jsx)(f,{})]})},v=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function m(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/newsapi-react-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/newsapi-react-app","/service-worker.js");v?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):m(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):m(t,e)}))}}()}},[[27,1,2]]]);
//# sourceMappingURL=main.b854b69a.chunk.js.map